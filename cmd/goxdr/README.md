# Go XDR compiler (goxdr)

goxdr compiles the [RFC4506] eXternal Data Representation (IDL) down
to go data structures.  It does not support [RPC][RFC5531], but simply
ignores RPC program declarations.  goxdr has several features that
together make it an attractive alternative to other go XDR compilers
for many situations:

* Fully [RFC4506] compliant, including nested structure and union
  declarations.

* Output code is highly readable, with data structures segregated from
  messier marshaling code, making it convenient to refer to generated
  go code when programming with the data structures.  Autogenerated
  comments remind you of vector and string bounds as well as the
  mapping between union discriminants and bodies.

* The compiler copies godoc-formatted comments from the XDR source
  code into the generated go file.  If your XDR source is
  appropriately commented, the output will render nicely with godoc,
  providing self-contained documentation for libraries that also
  include XDR types.

* Generated data types use the most natural go representations, such
  as arrays for arrays, slices for vectors, strings for strings.
  Union discriminants are ordinary fields, while arms (case
  statements) are methods that lazily allocate the necessary body
  based on the discriminant.

* String, vector, and variable opaque bounds are strictly enforced by
  generated `XDR` functions, rather than encoded in types (which makes
  assignment annoying) or struct field tags (which requires use of
  reflection).

* No use of reflection and the associated overhead and complexity.
  You can generically traverse XDR data structures using simple
  interface methods.

* Supports generic traversal in addition to standard binary XDR
  serialization.  Traversal has access to field names.  For example,
  you can concisely write generic pretty-printers, or generically
  traverse structures to extract all occurrences of a particular type
  at any level of struct/union nesting.

* Supports special-casing of typdefs.  Even though typedefs are
  compiled to type aliases, their `XDR` functions check for
  alias-name-specific marshaling methods that can differentiate
  between identical types.

* No runtime package dependency.  The output does contains a small
  amount of boilerplate wich can be suppressed and/or generated
  separately.

# Installation

To install outside of a go module, run:

    go get github.com/xdrpp/cmd/goxdr

To install it from within a go module (i.e., below a directory with a
`go.mod` file), run:

    go get github.com/xdrpp/cmd/goxdr@go1

# Documentation

The compiler options and generated code are detailed in the
[goxdr.1](goxdr.1.md) man page.

# Copyright and warranty disclaimer

goxdr is part of `stc` package and subject to the copyright and
warranty disclaimers of the whole package.

[RFC4506]: https://tools.ietf.org/html/rfc4506
[RFC5531]: https://tools.ietf.org/html/rfc5531
